<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Songs from the Shuttered — Gallery</title>
  <style>
    :root{
      --bg:#0f1113;
      --card:#0b0c0d;
      --muted:#9aa0a6;
      --accent:#e6e6e6;
      --gap:18px;
      --rows: 4;        /* change to 2 or 4 */
      --row-height: 190px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#070708 0%, #0f1113 100%);
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:36px;
      display:flex;
      align-items:flex-start;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:1200px;
    }

    header{
      margin-bottom:18px;
      display:flex;
      align-items:center;
      gap:18px;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-weight:600;
      letter-spacing:0.2px;
    }
    p.lead{
      margin:0;
      color:var(--muted);
      font-size:0.95rem;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .row-btn{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--accent);
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      font-size:0.9rem;
    }
    .row-btn.active{
      background:rgba(255,255,255,0.04);
      box-shadow: inset 0 -2px 0 rgba(255,255,255,0.02);
    }

    /* Grid that fills columns vertically to form N rows */
    .grid{
      display:grid;
      grid-auto-flow: column;
      grid-auto-columns: minmax(220px, 1fr);
      grid-template-rows: repeat(var(--rows), var(--row-height));
      gap:var(--gap);
      align-items:stretch;
    }

    figure{
      margin:0;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:8px;
      overflow:hidden;
      box-shadow: 0 6px 18px rgba(2,6,10,0.6);
      cursor:pointer;
      transition:transform 160ms ease, box-shadow 160ms ease;
      display:flex;
      flex-direction:column;
      height:100%; /* important so items fill grid row slot */
    }
    figure:hover{ transform: translateY(-6px); box-shadow: 0 18px 36px rgba(2,6,10,0.7); }

    .thumb{
      flex:1;
      background:#000;
      display:block;
      position:relative;
    }
    .thumb img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    figcaption{
      padding:10px 12px;
      font-size:0.92rem;
      color:var(--accent);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      border-top:1px solid rgba(255,255,255,0.02);
    }
    .cap-left{ color:var(--muted); font-size:0.88rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:85%; }

    /* modal */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(2,4,6,0.8);
      z-index:1000;
      padding:24px;
    }
    .modal.open{ display:flex; }
    .modal-content{
      max-width:92%;
      max-height:92%;
      border-radius:8px;
      overflow:hidden;
      background:var(--card);
      box-shadow:0 30px 80px rgba(2,4,6,0.7);
      display:flex;
      flex-direction:column;
    }
    .modal-img{
      width:100%;
      height:calc(92vh - 120px);
      object-fit:contain;
      background:#000;
    }
    .modal-footer{
      padding:12px 14px;
      color:var(--muted);
      font-size:0.95rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .close-btn{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--accent);
      padding:8px 12px;
      border-radius:6px;
      cursor:pointer;
      font-size:0.9rem;
    }

    @media (max-width:920px){
      :root{ --row-height:160px; }
    }
    @media (max-width:640px){
      :root{ --row-height:120px; }
      .grid{ grid-auto-columns: minmax(140px, 1fr); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Songs from the Shuttered</h1>
        <p class="lead">Minimal gallery — choose 2 or 4 thumbnail rows.</p>
      </div>

      <div class="controls" aria-hidden="false">
        <div style="color:var(--muted); font-size:0.9rem">Rows</div>
        <button id="twoBtn" class="row-btn">2</button>
        <button id="fourBtn" class="row-btn active">4</button>
      </div>
    </header>

    <main>
      <section class="grid" id="gallery" aria-label="Image gallery">
        <!-- JavaScript will populate thumbnails -->
      </section>
    </main>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content" role="document">
      <img id="modalImg" class="modal-img" src="" alt="">
      <div class="modal-footer">
        <div id="modalCaption"></div>
        <div>
          <button id="closeBtn" class="close-btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Filenames to place in images/ folder (use exact names)
    const images = [
      "שירת הסטיקר HR.jpg",
      "2112 Fr.jpg",
      "Her lies.jpg",
      "The Power of love.jpg",
      "Hallowed be thy name.jpg",
      "Fake Empire.jpg",
      "Where to now St. Peter.jpg",
      "Hallelujah.jpg",
      "After the gold rush.jpg",
      "Mercy Seat.jpg",
      "I am waiting for my man.jpg",
      "Weak.jpg",
      "Cortez the killer.jpg",
      "Flume.jpg",
      "society.jpg",
      "Hey Joe.jpg",
      "The good son.jpg",
      "One more cup of coffee.jpg",
      "Lost in the flood.jpg"
    ];

    const gallery = document.getElementById('gallery');
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    const modalCaption = document.getElementById('modalCaption');
    const closeBtn = document.getElementById('closeBtn');

    function captionFromFilename(name){
      return name.replace(/\.[^.]+$/, '')
                 .replace(/[_-]+/g,' ')
                 .replace(/\s{2,}/g,' ')
                 .trim();
    }

    images.forEach(name => {
      const fig = document.createElement('figure');

      const thumb = document.createElement('div');
      thumb.className = 'thumb';
      const img = document.createElement('img');
      img.src = 'images/' + encodeURI(name);
      img.alt = captionFromFilename(name);
      thumb.appendChild(img);

      const figcap = document.createElement('figcaption');
      const left = document.createElement('div');
      left.className = 'cap-left';
      left.textContent = captionFromFilename(name);
      figcap.appendChild(left);

      fig.appendChild(thumb);
      fig.appendChild(figcap);

      fig.addEventListener('click', () => {
        modalImg.src = 'images/' + encodeURI(name);
        modalImg.alt = captionFromFilename(name);
        modalCaption.textContent = captionFromFilename(name);
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
      });

      gallery.appendChild(fig);
    });

    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      modalImg.src = '';
    }

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Row controls
    const twoBtn = document.getElementById('twoBtn');
    const fourBtn = document.getElementById('fourBtn');

    function setRows(n){
      document.documentElement.style.setProperty('--rows', n);
      twoBtn.classList.toggle('active', n === 2);
      fourBtn.classList.toggle('active', n === 4);
      // Ensure focus stays visible for keyboard users
      twoBtn.setAttribute('aria-pressed', n === 2);
      fourBtn.setAttribute('aria-pressed', n === 4);
    }

    twoBtn.addEventListener('click', () => setRows(2));
    fourBtn.addEventListener('click', () => setRows(4));

    // Initialize to value in CSS root
    setRows(Number(getComputedStyle(document.documentElement).getPropertyValue('--rows').trim()) || 4);
  </script>
</body>
</html>